<div class="todo-list-container">
  <div class="header">
    <h1>My Todos</h1>
    <div class="header-actions">
      <button class="btn-trash" routerLink="/trash">
        üóëÔ∏è Trash
      </button>
      <button class="btn-new-todo" (click)="toggleForm()">
        {{ showForm ? '‚úï Cancel' : '+ New Todo' }}
      </button>
    </div>
  </div>

  <!-- Todo Form -->
  <app-todo-form
    *ngIf="showForm"
    (formSubmit)="onFormSubmit($event)"
    (formCancel)="onFormCancel()"
  ></app-todo-form>

  <!-- Filters -->
  <div class="filters">
    <label>
      <input type="checkbox" [checked]="showCompleted" (change)="toggleShowCompleted()" />
      Show Completed
    </label>
    <label>
      <input type="checkbox" [checked]="showPinnedOnly" (change)="toggleShowPinnedOnly()" />
      Show Pinned Only
    </label>
  </div>

  <!-- Error Message -->
  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading">
    Loading todos...
  </div>

  <!-- Todo List -->
  <div *ngIf="!loading && filteredTodos.length > 0" class="todos">
    <app-todo-item
      *ngFor="let todo of filteredTodos; trackBy: trackByTodoId"
      [todo]="todo"
      mode="normal"
      (toggleComplete)="toggleComplete($event)"
      (togglePin)="togglePin($event)"
      (delete)="deleteTodo($event)"
    ></app-todo-item>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && filteredTodos.length === 0" class="empty-state">
    <p>No todos found. Create one to get started!</p>
  </div>
</div>
