<div class="todo-form-container">
  <h2 class="form-title">{{ isEditMode ? 'Edit Todo' : 'Create New Todo' }}</h2>

  <form [formGroup]="todoForm" (ngSubmit)="onSubmit()" class="todo-form">
    <!-- Title Field -->
    <div class="form-group">
      <label for="title" class="form-label">
        Title <span class="required">*</span>
      </label>
      <input
        type="text"
        id="title"
        formControlName="title"
        class="form-input"
        placeholder="What needs to be done?"
        [class.invalid]="title?.invalid && title?.touched"
      />
      <div class="error-message" *ngIf="title?.invalid && title?.touched">
        <span *ngIf="title?.errors?.['required']">Title is required</span>
        <span *ngIf="title?.errors?.['maxlength']">Title must be less than 500 characters</span>
      </div>
    </div>

    <!-- Description Field -->
    <div class="form-group">
      <label for="description" class="form-label">Description</label>
      <textarea
        id="description"
        formControlName="description"
        class="form-textarea"
        placeholder="Add more details... (optional)"
        rows="3"
        [class.invalid]="description?.invalid && description?.touched"
      ></textarea>
      <div class="error-message" *ngIf="description?.invalid && description?.touched">
        <span *ngIf="description?.errors?.['maxlength']">Description must be less than 2000 characters</span>
      </div>
    </div>

    <!-- Priority and Due Date Row -->
    <div class="form-row">
      <!-- Priority Field -->
      <div class="form-group">
        <label for="priority" class="form-label">Priority</label>
        <select id="priority" formControlName="priority" class="form-select">
          <option *ngFor="let p of priorities" [value]="p.value">
            {{ p.icon }} {{ p.label }}
          </option>
        </select>
      </div>

      <!-- Due Date Field -->
      <div class="form-group">
        <label for="due_date" class="form-label">Due Date</label>
        <input
          type="date"
          id="due_date"
          formControlName="due_date"
          class="form-input"
        />
      </div>
    </div>

    <!-- Form Actions -->
    <div class="form-actions">
      <button
        type="button"
        class="btn btn-cancel"
        (click)="onCancel()"
      >
        Cancel
      </button>
      <button
        type="submit"
        class="btn btn-submit"
        [disabled]="todoForm.invalid"
      >
        {{ isEditMode ? 'Update Todo' : 'Create Todo' }}
      </button>
    </div>
  </form>
</div>
